# 易启主理——AI+UGC驱动的沉浸式大学模拟规划引擎项目总览

## 一、项目总述

易启主理——AI+UGC驱动的沉浸式大学模拟规划引擎（CareerPlanningSimulation）面向高校教师与学生，通过数字孪生校园与游戏化交互，构建一个可反复体验、可持续扩展的“大学生活模拟环境”。平台基于真实校园地图和多线分支剧本，将学生在大学期间常见的关键情境（专业选择、社团活动、实习实践、考研就业等）抽象为可交互的事件与数值变化，为学生提供安全可控的“预演场”。系统采用前后端分离架构，支持官方剧本与用户创作（UGC）双轨内容生产，并配套完整的管理后台，方便教师团队进行教学设计、内容迭代和运营管理。本文面向项目评审与开发者，重点介绍项目背景价值、核心业务流程、功能模块、技术架构以及教学应用方式。

---

## 二、项目背景与应用价值

- **问题背景**
  - 许多大学新生在专业选择、生涯规划、时间管理等方面缺乏直观感受，通常只能依赖宣讲会、讲座或问卷测评，难以形成具体而深刻的体验。
  - 传统生涯教育形式偏理论与讲述，学生参与度有限，难以模拟真实大学生活中的“长期选择—结果反馈”过程。

- **设计理念**
  - 以“数字孪生 + 游戏化 + UGC”为核心理念：在虚拟校园中高度还原大学学习与生活场景，通过互动剧情与数值成长，让学生以“扮演自我/他人”的方式探索不同选择路径。
  - 将大学阶段的关键抉择（选课、社团、科研、实习、恋爱、健康管理等）转化为多线剧本事件，用清晰的数值反馈和结算评价帮助学生理解“长期行为的累积效应”。

- **典型应用场景**
  - 作为“大学生职业生涯规划”课程的实践环节，在课前/课后组织学生进行一到多次完整周目体验，并结合结算报告开展课堂讨论与反思。
  - 作为新生入学教育、班会或主题团日活动的互动工具，帮助新生快速了解大学生活的多种可能路径与潜在风险点。
  - 在易班等校园信息化平台中嵌入，作为长期运营的“生涯教育专区”内容，支持活动积分和任务制玩法。

- **对教师与学生的价值**
  - 对教师：提供可配置的场景化教学资源，支持自定义剧本和规则，便于围绕“本校特色”“本专业特点”设计教学案例。
  - 对学生：在低风险环境中提前体验不同选择组合的结果，通过可视化的数值与结算评价，形成对自我优势/短板与未来路径的更清晰认知。

- **差异与优势**
  - 相比单纯的测评问卷或静态咨询材料，本项目强调“过程体验 + 多次周目 + 自创内容”，让学生可以在不同周目尝试不同策略。
  - 相比通用的“大学生活模拟游戏”，本平台更强调与真实校园/课程场景的对接，以及教师团队可控的剧本与规则配置能力。

---

## 三、核心业务流程与使用路径

本章节从学生、内容创作者（教师/学生）、管理员三个视角，概览平台的核心业务流程和典型使用路径。

### 3.1 学生体验闭环

1. **账号注册与登录**  
   - 通过前端登录页（`/login`）完成注册/登录，后台认证接口 `/api/auth` 负责用户注册、登录与获取基本信息（`/register`、`/login`、`/profile`）。

2. **初始角色设定与存档创建**  
   - 学生在“初始设置”页面（`/initial-setup`）创建人物档案和初始存档，配置基础属性与偏好。  
   - 后端通过 `/api/saves` 接口管理存档的创建、读取、更新和删除，实现多存档或多周目支持。

3. **校园地图探索**  
   - 学生进入“校园地图”页面（`/campus-map`），在基于真实或抽象校园地图的界面中浏览不同地点和事件入口。  
   - 地图配置与事件位置由后端公共接口 `/api/public/map-config` 及管理员配置接口 `/api/admin/map-positions` 提供数据支持。

4. **剧本事件触发与分支选择**  
   - 学生通过地图上的事件入口进入“剧本详情”页面（`/script/:id`）。  
   - 每个剧本包含多条剧情分支和决策选项，选项会影响学业、社交、健康、技能等多维度数值的增长或下降。

5. **数值变化与过程反馈**  
   - 平台通过动态数值系统实时记录学生在剧本中的选择结果，允许在界面上展示数值变化（例如采用组件 `ValueChangeDisplay` 等）。  
   - 数值作为后续结算与评价的重要依据，与存档及历史记录关联。

6. **结算与评价反思**  
   - 在学期或学年结束节点，学生进入“结算页面”（`/settlement`），由后端 `/api/settlement/calculate` 接口根据数值与事件历史生成结算报告。  
   - 结算报告展示关键维度表现、解锁结局和获得的勋章，帮助学生进行自我反思与下一个周目的规划。

7. **个人中心与勋章展示**  
   - 学生可在“个人中心”（`/profile`）查看个人信息、存档列表与结算历史，以及通过 `/api/badges` 与 `/api/badges/unlocked/:saveId` 接口获取的勋章解锁情况。

### 3.2 UGC 创作工坊使用路径

1. **创作者身份与入口**  
   - 创作者可以是教师、辅导员，或经过授权的学生用户。  
   - 前端提供“创作工坊”页面（`/workshop`、`/workshop-editor`、`/workshop-list` 等），用于浏览与编辑剧本。

2. **剧本创建与编辑**  
   - 在可视化编辑界面中配置剧本基础信息、节点内容、分支选项及对应的数值影响规则。  
   - 支持对剧情流程进行增删改，形成多线分支结构。

3. **提交、审核与发布**  
   - 创作者提交剧本后，系统将剧本标记为待审核状态。  
   - 管理员通过后台“剧本管理”模块对内容进行审核与调整，通过后即可在学生端地图或列表中上线。

4. **持续迭代**  
   - 基于教学反馈或数据表现（例如某条路线选择率过低），创作者可回到工坊对剧本进行修订和版本更新。

### 3.3 管理后台工作流

1. **管理员登录**  
   - 管理员通过 `/admin` 登录页进入后台，使用 `/api/admin/login` 完成身份验证，后台采用专门的 `adminAuth` 中间件保障安全性。

2. **用户与内容管理**  
   - 用户管理：通过 `/api/admin/users` 查看、筛选和管理学生用户信息。  
   - 剧本管理：通过 `/api/admin/scripts` 审核或下线剧本内容，维护整体内容质量。  
   - 勋章管理：通过 `/api/admin/badges` 配置勋章及解锁条件。

3. **地图与系统配置**  
   - 地图与事件点位配置：`/api/admin/map-positions` 用于设置校园地图上的事件入口位置与元数据。  
   - 系统设置：`/api/admin/settings` 提供平台级别配置，如某些功能开关、数值系数等。

4. **运营与日志记录**  
   - 通过 `AdminLog` 等模型记录关键操作日志，为后续追踪问题及安全审计提供依据。  
   - 后续可扩展基础数据看板，用 ECharts 等可视化工具展示关键指标。

---

## 四、功能模块概览（学生端 / 创作工坊 / 管理后台）

本章节从角色视角对主要功能模块进行分区说明，方便评审快速理解系统范围与边界。

### 4.1 学生端功能模块

- **首页与引导**  
  - 首页（`/`）展示平台简介、核心功能入口和引导信息，帮助新用户快速上手。

- **登录与账户管理**  
  - 登录/注册页面（`/login`）支持新用户创建账号与已有用户登录，后端通过 `/api/auth` 实现鉴权逻辑。  
  - 个人中心（`/profile`）展示用户基本信息、历史存档和结算记录，并呈现已解锁的勋章。

- **游戏体验模块**  
  - 初始设置（`/initial-setup`）：创建角色与初始存档，设置基准属性。  
  - 校园地图（`/campus-map`）：交互式浏览不同场景、触发事件和剧本。  
  - 剧本详情（`/script/:id`）：展示剧本内容和决策选项，实时体现数值变化。  
  - 结算页面（`/settlement`）：对阶段性结果进行总结与反馈。

- **成就与反馈模块**  
  - 勋章展示与解锁记录，通过 `/api/badges` 相关接口读取。  
  - 可扩展图表展示（如 ECharts）展示数值成长曲线与行为轨迹，强化可视化反馈。

### 4.2 创作工坊（UGC）模块

- **剧本浏览与管理**  
  - 剧本列表与搜索（`/workshop-list` 等）：支持按标签、作者等维度浏览已有剧本。

- **可视化剧本编辑器**  
  - 剧情节点编辑：配置每个节点的文本内容、场景背景和出场角色。  
  - 分支与选项管理：为每个节点设置多个选项，不同选项指向不同后续节点或结局。  
  - 数值影响配置：为每个选项配置对学业、社交、健康、技能等数值的正负影响。

- **版本控制与流程管理**  
  - 剧本状态管理：草稿、待审核、已发布、已下线等状态，以支持课堂前后不同阶段使用。  
  - 预览功能：创作者可在发布前以学生视角模拟体验剧本路径。

### 4.3 管理后台模块

- **用户与权限管理**  
  - 用户数据查看与基础操作，区分普通学生账号与具备创作/管理权限的账号。

- **内容管理**  
  - 剧本管理：审核、编辑、上下线 UGC 与官方剧本。  
  - 勋章管理：配置勋章名称、图标、解锁条件与说明文案。  
  - 公告管理：发布系统公告，在前端公共接口 `/api/public/announcements` 中展示。

- **运营与配置**  
  - 地图管理：配置地图点位与事件绑定。  
  - 积分与系统设置：对积分机制、数值权重等全局参数进行配置，支持不同课程/学院的差异化需求。

---

## 五、系统架构与技术选型

### 5.1 整体架构概览

- **前后端分离**  
  - 前端使用 Vue 3 + TypeScript 构建 SPA 应用，通过 Axios 调用后端 RESTful API。  
  - 后端采用 Node.js + Express + TypeScript，结合 Sequelize ORM 访问 MySQL 数据库。  
  - 通过 JWT 进行用户与管理员身份认证，前后端以 Token 方式维护会话状态。

- **数据库层**  
  - 使用 MySQL 8.0 作为关系型数据库，提供可靠的事务支持与扩展能力。  
  - `database/init.sql` 提供初始化脚本，后端启动时通过 Sequelize 自动同步表结构并插入种子数据。

### 5.2 前端架构与技术栈

- **核心技术栈**  
  - Vue 3 + TypeScript：构建组件化单页应用，确保类型安全和良好的可维护性。  
  - Pinia：负责用户状态、游戏状态、剧本数据等核心状态管理。  
  - Vue Router 4：实现多页面路由（首页、登录、地图、剧本详情、结算、工坊、后台等）。  
  - Element Plus + Tailwind CSS：提供 UI 组件与灵活的样式系统。  
  - Axios：与后端 API 通信。  
  - Fabric.js、ECharts、GSAP、VueDraggable：分别用于地图交互、数据可视化、过场动画与拖拽编辑等特色功能。

- **目录结构简述**  
  - `views/`：页面级组件，如 `HomePage.vue`、`CampusMap.vue`、`WorkshopEditor.vue`、`admin/Dashboard.vue` 等。  
  - `components/`：通用组件与业务组件，如地图事件按钮、勋章面板、后台管理面板等。  
  - `stores/`：Pinia 状态（`userStore.ts`、`gameStore.ts`、`scriptStore.ts` 等）。  
  - `services/api.ts`：统一封装前端 HTTP 调用。  
  - `router/`：路由配置。  
  - `types/`、`utils/`：类型定义和通用工具函数。

### 5.3 后端架构与技术栈

- **技术选型**  
  - Node.js + Express + TypeScript：提供类型安全的 API 层，便于维护路由与中间件。  
  - Sequelize：管理模型、表结构同步与数据访问逻辑。  
  - JWT + Argon2：实现安全的用户认证与密码加密。

- **主要模块**  
  - `config/database.ts`：数据库连接与 Sequelize 配置。  
  - `models/`：包括 `User`、`Save`、`Script`、`Badge`、`Admin`、`AdminLog`、`SystemSetting`、`Workshop*`（如有）等数据模型。  
  - `routes/`：按功能划分的路由文件，如 `auth.ts`、`saves.ts`、`scripts.ts`、`badges.ts`、`settlement.ts`、`admin.ts`、`public.ts` 等。  
  - `middleware/`：用户认证与管理员认证中间件。  
  - `seeds/`：初始剧本与基础数据的种子脚本。  
  - `index.ts`：后端应用入口，负责加载配置、注册路由并启动服务。

---

## 六、数据与数值系统设计概览

### 6.1 关键数值维度

- **学业**：反映学生在课程学习、考试成绩、科研活动等方面的投入与成果。  
- **社交**：体现社团活动、人际关系、团队合作等相关行为的累积效果。  
- **健康**：代表身体与心理健康状态，与作息、压力管理、运动习惯等行为相关。  
- **技能**：涵盖职业技能、通用技能（沟通、表达、组织等）与专业相关能力。

这些数值通过剧本事件的选择不断变化，为最终结算提供量化基础。

### 6.2 剧本与数值关系

- 每个剧本节点下的选项会对应一组数值变化（正向或负向），并可能触发新的事件或结局。  
- 通过合理的数值设计，可以鼓励学生在“短期收益”和“长期发展”之间进行权衡，引导反思。  
- 不同剧本可以侧重不同维度，例如“科研项目”更偏向学业与技能，“社团活动”更偏向社交与健康。

### 6.3 存档与历史记录

- `Save` 模型记录每一次周目的关键信息，包括当前数值、进度节点与关联的剧本记录。  
- 结算记录通过 `/api/settlement/history` 等接口提供历史数据，用于在前端绘制成长轨迹与多周目对比。

### 6.4 勋章与积分系统

- 勋章通过 `Badge` 模型与相关接口配置，支持基于数值阈值、特定剧本路径或组合行为进行解锁。  
- 勋章系统既可以作为学生个人成就展示，也可与校园活动积分、课程附加分等机制挂钩。

### 6.5 数据分析与研究潜力

- 在获得授权和合规前提下，未来可以基于匿名化数据分析学生在不同剧本中的选择偏好、常见路径与结局分布。  
- 这些数据可为高校生涯教育、课程设计与学生发展支持提供实证参考。

---

## 七、教学与扩展使用建议

### 7.1 课程嵌入与教学设计

- 将平台作为“大学生职业规划”“专业导论”“就业指导”等课程的实践环节，安排学生在若干周内体验不同剧本并撰写反思报告。  
- 教师可以围绕特定剧本设计课堂讨论问题，例如“为何选择此路径”“还有哪些备选方案”等。

### 7.2 生涯咨询与班级活动

- 在生涯咨询或班会活动中，以平台剧本为案例，引导学生分享自己在模拟环境中的选择与真实想法。  
- 将结算报告作为生涯咨询的辅助材料，帮助咨询师更具体地了解学生的倾向与困惑。

### 7.3 UGC 对教师团队的意义

- 教师可通过创作工坊快速落地本校特色场景，如某学院的专业选择情景、本校社团生态、特色项目（交换、双学位等）。  
- 辅导员可以基于班级或年级特点，定制贴近学生实际情况的剧本故事，增强共鸣感。

### 7.4 平台对接与未来扩展

- 与易班或校内统一身份认证系统集成，实现单点登录与数据联动。  
- 扩展更多数值维度（如经济状况、心理压力指数等）和新的结算维度。  
- 引入 AI 助手支持：例如根据学生历史选择自动生成个性化反馈，或辅助教师快速生成初稿剧本。

---

## 八、附录（可选）

### 附录 A：页面与功能一览（示例）

- `/`：首页，展示平台概览与入口。  
- `/login`：登录/注册页面。  
- `/initial-setup`：角色与存档初始设置。  
- `/campus-map`：校园地图与事件入口。  
- `/script/:id`：剧本详情与互动选择。  
- `/settlement`：结算报告展示。  
- `/workshop` / `/workshop-editor` / `/workshop-list`：创作工坊相关页面。  
- `/profile`：个人中心与勋章展示。  
- `/admin`：管理员登录。  
- `/admin/dashboard`：后台控制台与管理功能入口。

### 附录 B：主要 API 分组概览

- `/api/auth`：认证与基础用户信息。  
- `/api/saves`：存档管理。  
- `/api/scripts`：剧本内容管理（含部分 UGC）。  
- `/api/badges`：勋章查询与解锁记录。  
- `/api/settlement`：结算计算与历史记录。  
- `/api/public`：公告、地图配置等公共信息。  
- `/api/admin`：管理员登录、用户/脚本/勋章/设置与地图位置管理。

### 附录 C：开发阶段与规划

- Phase 0：项目准备（环境搭建、技术选型等）——已完成。  
- Phase 1：核心闭环（登录—地图—剧本—结算）——已完成。  
- Phase 2：游戏机制完善（进行中）。  
- Phase 3：视觉系统优化。  
- Phase 4：内容扩充（更多剧本与场景）。  
- Phase 5：UGC 功能增强与生态建设。  
- Phase 6：测试与性能优化、教学落地评估。
